<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>FitMart | Signup</title>
	<link rel="stylesheet" href="/assets/stylesheets/style.css" />
	<link rel="stylesheet" href="/assets/stylesheets/auth.css">
</head>

<body>
	<div class="bg-image">
		<div class="overlay"></div>

		<div class="card animate">
			<h1>Create Account 🏋️‍♂️</h1>
			<p class="subtitle">Join FitMart and start your transformation</p>

			<form id="signup-form">
				<input type="email" id="email" placeholder="Email" required />
				<input type="password" id="password" placeholder="Password" required />
				<button type="submit" class="signup-btn">Sign Up</button>
			</form>

			<div class="divider"><span>or</span></div>

			<button id="google-signup" class="google-btn">
				<img src="https://www.svgrepo.com/show/475656/google-color.svg" alt="Google" />
				Sign up with Google
			</button>

			<p class="switch">
				Already have an account?
				<a href="login.html">Login</a>
			</p>
			<p id="signup-msg" class="message"></p>
		</div>
	</div>

	<script type="module">
		import { auth, provider } from "./firebase.js"
		import {
			createUserWithEmailAndPassword,
			signInWithPopup,
		} from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js"

		const form = document.getElementById("signup-form")
		const msg = document.getElementById("signup-msg")
		const googleBtn = document.getElementById("google-signup")

		form.addEventListener("submit", async (e) => {
			e.preventDefault()
			const email = form.email.value
			const password = form.password.value

			try {
				await createUserWithEmailAndPassword(auth, email, password)
				msg.textContent = "✅ Signup successful!"
				msg.style.color = "lime"
				setTimeout(() => (window.location.href = "login.html"), 1000)
			} catch (err) {
				msg.textContent = "❌ " + err.message
				msg.style.color = "red"
			}
		})

		googleBtn.addEventListener("click", async () => {
			try {
				await signInWithPopup(auth, provider)
				msg.textContent = "✅ Google sign-in successful!"
				msg.style.color = "lime"
				setTimeout(() => (window.location.href = "index.html"), 1000)
			} catch (err) {
				msg.textContent = "❌ " + err.message
				msg.style.color = "red"
			}
		})
	</script>
</body>

</html>